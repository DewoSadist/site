<nav class="navbar navbar-fixed-top navbar-inverse">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav"
                    aria-expanded="false">
                <!-- div class="navbar-label">Menu</div-->
                <div class="icon-bar-wrap">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </div>
            </button>
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-state pull-left" ng-if="$ctrl.UserService.getAddress()!= null && $ctrl.state.includes('store')">
                <a class="text-uppercase hidden-xs" href="javascript:void(0)">Preorder</a>
                <span class="text-info hidden-xs">to</span>
                <a href="javascript:void(0)" data-toggle="collapse" data-target="#umap" ng-click="$ctrl.loadMap();">{{$ctrl.UserService.getAddress()}}</a>
            </div>
            <!--<div class="navbar-state visible-xs visible-sm pull-left">{{$ctrl.getStateTitle()}}</div>-->
            <div class="navbar-brand" style="cursor: pointer" ng-attr-ui-sref="{{$ctrl.isAuthorized ? 'profile.main' : 'home'}}">
                <span class="icon icon_logo"></span>
            </div>

            <div class="navbar-basket pull-right" data-toggle="collapse" data-target="#sidecart">
                <!-- TODO: Enable on see theme -->
                <span
                        ng-click="$ctrl.CartServices.toggleShowCart()"
                        class="icon icon_basket"
                        data-toggle="collapse" data-target="#sidecart"
                        ng-show="$ctrl.CartServices.getTotalCount() > 0">
                    <span>{{ $ctrl.CartServices.getTotalCount()}}</span>
                </span>
            </div>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="nav">
            <ul class="nav navbar-nav navbar_hb">
                <li>
                    <span class="contacts">604 7814625 TEXT/CALL</span>
                </li>
                <li ng-if="$ctrl.isAuthorized"
                    ng-class="{active: $ctrl.state.includes('profile') || $ctrl.state.includes('account')}">
                    <a ui-sref="profile.main">My Profile</a>
                </li>
                <li ng-class="{active: $ctrl.state.includes('store')}">
                    <a ui-sref="store.restaurants">Restaurants</a>
                </li>
                <li ng-class="{active: $ctrl.state.includes('about')}">
                    <a ui-sref="about">About</a>
                </li>
                <li ng-class="{active: $ctrl.state.includes('contacts')}">
                    <a ui-sref="contacts">Contacts</a>
                </li>
                <li>
                    <a ng-if="!$ctrl.isAuthorized" ui-sref="users.login">Login</a>
                </li>
                <li>
                    <a ng-if="$ctrl.isAuthorized" href="javascript:void(0);" ng-click="$ctrl.logout()">Logout</a>
                </li>
            </ul>
        </div>
        <div class="collapse navbar-map-collapse" id="umap">
            <div class="nav navbar_map">
                <ng-map zoom="16"
                        id="map"
                        trigger-resize="true"
                        map-initialized="onMapLoaded()"
                        style="width:100%; height:100px;"
                        center="{{$ctrl.center.lat}},{{$ctrl.center.lng}}">
                        <marker draggable="true"
                                position="{{$ctrl.center.lat}} ,{{$ctrl.center.lng}}"
                                animation="DROP"
                                on-dragend="onDragEnd()"
                                centered="true">

                        </marker>
                </ng-map>
                <div class="form-group">
                    <br>
                    <label class="control-label" for="hmap">Delivery instructions</label>
                    <textarea id="hmap" class="form-control"></textarea>
                </div>
            </div>
        </div>

        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>
<!-- Sidebar -->
<aside>
    <sidebar-cart></sidebar-cart>
</aside>