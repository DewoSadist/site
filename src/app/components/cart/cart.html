<section class="form-wrap container cart-form">
    <div class="container">
        <form class="form-horizontal">
            <div class="row" ng-show="$ctrl.CartServices.getTotalCount() > 0">
                <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3">
                    <div class="text-center">
                        <h1 class="title">
                            Order from: {{$ctrl.cart.restaurant.title}}
                        </h1>
                        <div class="subtitle">
                            {{$ctrl.cart.restaurant.address}} {{$ctrl.cart.restaurant.phone}}
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <legend><h2>Summary</h2></legend>
                <div class="alert alert-warning" role="alert" ng-if="$ctrl.CartServices.getTotalCount() === 0">
                    Your cart is empty
                </div>
                <div class="table-responsive col-lg-12" ng-show="$ctrl.CartServices.getTotalCount() > 0">

                    <table class="table table-striped ngCart cart">

                        <thead>
                        <tr>
                            <th></th>
                            <th>Quantity</th>
                            <th>Amount</th>
                            <th>Total</th>
                        </tr>
                        </thead>
                        <tfoot>

                        <tr ng-show="ngCart.getShipping()">
                            <td></td>
                            <td></td>
                            <td>Shipping:</td>
                            <td>{{ ngCart.getShipping() | currency }}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td><h4>subtotal:</h4></td>
                            <td>{{ $ctrl.cart.subtotal | currency }}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td><h4>Tax:</h4></td>
                            <td>{{ $ctrl.cart.tax| currency}}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td><h4>Delivery:</h4></td>
                            <td>{{ $ctrl.cart.delivery == 0? 'free':$ctrl.cart.delivery | currency}}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td><h4>Service fee:</h4></td>
                            <td>{{ $ctrl.cart.service_fee | currency}}</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td><h4>Total:</h4></td>
                            <td>{{ $ctrl.cart.total | currency}}</td>
                        </tr>
                        </tfoot>
                        <tbody>
                        <tr ng-repeat="item in $ctrl.cart.items track by $index">
                            <td><p>{{ item.name }}</p>
                                <p ng-repeat="note in item.notes">
                                    {{note.title}}-{{note.name}}
                                </p>
                                <p>{{item.additional}}</p>
                            </td>
                            <td ng-model="item.quantity">
                        <span class="glyphicon glyphicon-minus" ng-class="{'disabled':item.quantity==1}"
                              ng-click="$ctrl.CartServices.decreaseItemQ(item.id)"></span>
                                {{ item.quantity | number }}&nbsp;&nbsp;
                                <span class="glyphicon glyphicon-plus"
                                      ng-click="$ctrl.CartServices.increaseItemQ(item.id)"></span></td>
                            <td>
                                {{ item.each_price | currency}}
                            </td>
                            <td ng-model="item.price">
                        <span ng-click="$ctrl.CartServices.deleteItemFromCart(item.id)"
                              class="glyphicon glyphicon-remove"></span>{{ item.price | currency }}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="form-group" ng-if="$ctrl.UserService.isAuthorized()">
                <legend><h2>Address</h2></legend>
                <p>{{$ctrl.UserService.user.address}}</p>
            </div>
            <!-- Payment -->
            <div class="form-group">
                <legend><h2>Payment</h2></legend>
                <div class="radio radio-inline">
                    <input type="radio" id="cash"
                           name="payment"
                           ng-model="$ctrl.payment" ng-value="cash"
                           clear-errors
                           checked="true">
                    <label for="cash">
                        <span>Cash</span>
                    </label>
                </div>
                <div class="radio radio-inline">
                    <input type="radio" id="credit"
                           name="payment" ng-value="credit"
                           clear-errors>
                    <label for="credit">
                        <span>Credit on Delivery</span>
                    </label>
                </div>

            </div>
            <!-- order data form-->

            <div ng-if="!$ctrl.UserService.isAuthorized()">

                <!-- Text input-->
                <div class="form-group">
                    <!-- Form Name -->
                    <legend><h2>Order data</h2></legend>
                    <fieldset>
                        <label class="col-md-4 control-label" for="of_f_name">First Name</label>
                        <div class="col-md-5">
                            <input id="of_f_name" name="First Name" placeholder="Daulet" class="form-control input-md"
                                   required type="text">

                        </div>
                    </fieldset>


                </div>

                <!-- Text input-->
                <div class="form-group ">
                    <label class="col-md-4 control-label" for="of_address">Address</label>
                    <div class="col-md-5">
                        <input id="of_address" name="textinput" placeholder="city"
                               class="form-control input-md"
                               required type="text">
                    </div>

                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="of_email">Email</label>
                    <div class="col-md-5">
                        <input id="of_email" name="textinput" placeholder="" class="form-control input-md" required
                               type="email">
                    </div>
                </div>
                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="of_phone1">Tel.</label>
                    <div class="col-md-5">
                        <input id="of_phone1" name="textinput" placeholder="" class="form-control input-md" required
                               type="tel">
                    </div>
                </div>

            </div>
            <!--Alert information row -->
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-5">
                    <div ng-show="$ctrl.isSend" class="alert alert-success">Your Order successfully have been send</div>
                    <div ng-show="$ctrl.errors" class="alert alert-danger">Error on submit form</div>
                </div>
            </div>
            <!-- Submit Button -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="of_btn"></label>
                <div class="col-md-5">
                    <button id="of_btn" name="singlebutton" class="btn btn-success"
                            ng-disabled="$ctrl.CartServices.getTotalCount() === 0">Place Order
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>
